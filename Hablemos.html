<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Hablemos - Panel de Clientes</title>
<style>
  body { font-family: Arial, sans-serif; margin:0; padding:0; background:#f4f4f4; }
  header { background:#333; color:#fff; padding:1rem; text-align:center; }
  main { padding:1rem; max-width:900px; margin:0 auto; }
  h1 { margin-bottom:1rem; }
  form { background:#fff; padding:1rem; border-radius:5px; margin-bottom:2rem; box-shadow:0 2px 5px rgba(0,0,0,.1);}
  form input, form textarea { width:100%; padding:.5rem; margin-bottom:1rem; border:1px solid #ccc; border-radius:3px; }
  form button { padding:.5rem 1rem; background:#333; color:#fff; border:none; border-radius:3px; cursor:pointer; }
  form button:hover { background:#555; }
  .msg-list { list-style:none; padding:0; }
  .msg-list li { background:#fff; padding:1rem; margin-bottom:1rem; border-radius:5px; box-shadow:0 2px 5px rgba(0,0,0,.1); position: relative; }
  .msg-list li span { display:block; font-weight:bold; margin-bottom:.5rem; }
  .msg-list li small { display:block; color:#666; font-size:.85rem; margin-bottom:.5rem; }
  .btn-borrar { position: absolute; top:1rem; right:1rem; padding:0.3rem 0.6rem; background:#e74c3c; color:#fff; border:none; border-radius:3px; cursor:pointer; }
  .btn-borrar:hover { background:#c0392b; }
</style>
</head>
<body>

<header>
  <h1>Panel de Mensajes - Hablemos</h1>
</header>

<main>
  <h2>Mensajes recibidos:</h2>
  <ul id="msgList" class="msg-list"></ul>
</main>

<script>
  const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbxruWsZMKc0VimmxhYuIQBxAgwFhhcQdey7FqymujApdURavXSbz1ikQf9DAoxS3gjG/exec"; // misma URL que usaste en index.html
  const msgList = document.getElementById('msgList');

  // Funci칩n para renderizar mensajes
  function renderMensajes(mensajes) {
    msgList.innerHTML = '';
    if (mensajes.length === 0) {
      msgList.innerHTML = '<li>No hay mensajes.</li>';
      return;
    }

    mensajes.forEach((m, i) => {
      const li = document.createElement('li');
      li.innerHTML = `
        <span>${m.nombre}</span>
        <small>${m.email}</small>
        <small>Fecha: ${m.fecha}</small>
        <p>${m.mensaje}</p>
      `;
      msgList.appendChild(li);
    });
  }

  // Funci칩n para obtener mensajes desde Google Sheets
  async function fetchMensajes() {
    try {
      const response = await fetch(WEB_APP_URL + "?action=get");
      const mensajes = await response.json();
      renderMensajes(mensajes);
    } catch (error) {
      console.error("Error al cargar los mensajes:", error);
      msgList.innerHTML = '<li>No se pudieron cargar los mensajes.</li>';
    }
  }

  // Llamar a la funci칩n al cargar la p치gina
  fetchMensajes();
</script>
</body>
</html>